# Node.Js

![](C:\Users\彭\AppData\Roaming\Typora\typora-user-images\image-20191211203555989.png)

#### Node.js是什么

###### Node.js是一个JavaScript运行时环境（可以解析和执行javaScript的代码）

###### 除了浏览器以外，Node.js也可以解析并运行javaScript代码

###### Node.js只操作ECMAScript，构建于Chrome的V8引擎之上

###### 在Node这个javaScript执行环境中为JavaScript提供一些服务器级别的API操作

###### 文件的读写、网络服务的构建 、网络通信、http服务器......

#### Node.js的特性

###### 事件驱动、非阻塞IO模型（异步）、轻量高效

#### npm

###### npm是世界上最大的开源库生态系统 

###### 让开发人员更方便的去下载有关JavaScript相关的包

#### Node.js能做什么

###### Web服务器后台

###### 命令行工具：npm、git、hexo

#### 学习的一些资源

《深入浅出Node.js》

《Node.js权威指南》

JavaScript标准参考教程（alpha）：http://javascript.ruanyifeng.com

node入门：http://www.nodebeginner.org/index-zh-cn.html

官方API文档：https://nodejs.org/dist/latest-v6.x/docs/api/

中文文档（版本旧）：http://www.nodeclass.com/api/node.html

CNODE社区：http://cnodejs.org

CNODE-新手入门：http://cnodejs.org/getstart

#### 课程能学到啥

##### B/S编程模型

######     Brower - Server (back-end)

###### 	任何服务器端技术这种BS编程模型都是一样的，和语言无关

##### 模块化编程

###### RequireJS、SeaJS.....！可以用@import() 一样来引用加载JavaScript脚本文件

##### 异步编程

###### 	回调函数、Promise、async、generator

##### Express Web 开发框架

##### ECMAScript 6

#### Hello word

```
var a = 'hefskfds';
console.log(a);
```

##### 可以读取系统文件

```
//声明一个fs操作文件系统的模块
var fs = require('fs');
//读取文件
    // 第一个参数：文件路径
    // 第二个参数：回调(data, error)  data成功返回数据，不成功返回null！error成功返回null，不成功返回错误对象
fs.readFile('./less.html', function (error, data) {
    console.log(data.toString());
});
```

##### 写文件和简单的错误处理

```
//第一个参数，文件路径
// 第二个参数，文件内容
// 第三个参数：接收一个参数！
    // error成功是 null，失败是：错误对象
var fs = require('fs');

fs.writeFile('./你好>.md', "Helow I am node.js", function (error) {
    if(error) {
        console.log('写入失败');
    }else{
        console.log('写入成功');
    }
});
```

##### 构建一个简单的web服务器

```
//1、加载http核心模块
var http = require('http');

//2、使用http.createServer（）方法创建一个Web服务器
var server = http.createServer();

//3、注册request请求事件，当客户端请求过来，就会自动触发服务器的request请求事件，然后执行第二个参数：回调处理函数
// 第一个参数Request：请求对象
// 第二个参数Response: 响应对象
server.on('request', function (request, response) {
    console.log('收到请求');

    //使用write发送响应，可使用多次，最后一定要使用end来结束响应，否则客户端会一直等待
    if(request.url === '/login') {
        response.write('登陆');
    }else if(request.url === '/index'){
        response.write('首页');
    }
    response.end();
});

// 4、绑定端口号，启动服务器
server.listen(3000, function () {
    console.log('服务器已启动成功');
});
```

##### 根据不同请求路径返回不同的数据

```
//1、加载http核心模块
const http = require('http');

//2、使用http.createServer（）方法创建一个Web服务器
const server = http.createServer();

//3、注册request请求事件，当客户端请求过来，就会自动触发服务器的request请求事件，然后执行第二个参数：回调处理函数
// 第一个参数Request：请求对象
// 第二个参数Response: 响应对象
server.on('request', function (req, res) {
    //解决请求数据返回中文有乱码问题
    res.writeHead(200, { 'Content-Type': 'text/html;charset=utf8' });
    console.log('你的请求地址是' + req.url);

    //使用write发送响应，可使用多次，最后一定要使用end来结束响应，否则客户端会一直等待
    // if(req.url === '/login') {
    //     res.write('登陆');
    // }else if(req.url === '/index'){
    //     res.write('首页');
    // }
    // res.end();

    // 建议使用这种方式
    // res.end('hello word');

    // 根据不同的请求路径发送不同的响应结果
    // 1.获取请求路径
    // 2.判断路径处理响应
    var url = req.url;
    if (url === '/') {
        res.end('首页');
    } else if (url === '/products') {
        var products = [
            {
                name: '苹果X',
                price: 8888
            },
            {
                name: '华为',
                price: 3000
            },
            {
                name: '小米',
                price: 1000
            }
        ]
        //响应内容只能是二进制数据或字符串
        res.end(JSON.stringify(products));
    } else {
        res.end('404 Not Found.');
    }
});

// 4、绑定端口号，启动服务器
server.listen(3000, function () {
    console.log('服务器已启动成功');
});
```

##### Node中的js核心模块

###### 文件操作的`fs`核心模块、http服务构建的`http`模块、`path`路径操作模块、`os`操作系统信息模块.....

###### 模块需要构建

```
const os = require('os');

const path = require('path');

// 获取当前电脑的cpu信息
console.log(os.cpus());
// memory 内存
console.log(os.totalmem());


console.log(path.extname('c:/a/b/c'));
```

##### ip地址和端口号概念

![image-20191212212718585](C:\Users\彭\AppData\Roaming\Typora\typora-user-images\image-20191212212718585.png)

```
    console.log('你的请求地址是' + req.url);
    console.log('请求我的ip地址是: ', req.socket.remoteAddress, req.socket.remotePort);
```

##### 响应内容类型

```

```

